<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rabbit Miner - Admin Control</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0a0a0c; color: #e0e0e0; padding: 20px; margin: 0; }
        .container { max-width: 900px; margin: 0 auto; }
        .header { background: #1a1a1f; padding: 20px; border-radius: 12px; border-bottom: 3px solid #ff9800; text-align: center; margin-bottom: 20px; }
        h2 { color: #ff9800; margin: 0; }
        .status { font-size: 12px; color: #888; margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; background: #1a1a1f; border-radius: 8px; overflow: hidden; }
        th { background: #ff9800; color: #000; padding: 15px; text-align: left; }
        td { padding: 12px 15px; border-bottom: 1px solid #333; }
        input { background: #2a2a2e; border: 1px solid #444; color: #fff; padding: 8px; border-radius: 5px; width: 100px; }
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-save { background: #4caf50; color: white; }
        .btn-ban { background: #f44336; color: white; margin-left: 5px; }
        .unban { background: #2196f3; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>üê∞ Rabbit Miner Admin Panel</h2>
        <div class="status">Connected to: https://bacon-soma-slightly-broke.trycloudflare.com</div>
    </div>

    <table>
        <thead>
            <tr>
                <th>User ID</th>
                <th>Coins</th>
                <th>PPH</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="user-list">
            <tr><td colspan="5" style="text-align:center;">Loading players...</td></tr>
        </tbody>
    </table>
</div>

<script>
    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ
    const API_URL = "https://bacon-soma-slightly-broke.trycloudflare.com"; 

    async function fetchUsers() {
        try {
            const response = await fetch(`${API_URL}/admin/users`);
            const users = await response.json();
            const list = document.getElementById('user-list');
            list.innerHTML = '';

            if (users.length === 0) {
                list.innerHTML = '<tr><td colspan="5" style="text-align:center;">No players found yet.</td></tr>';
                return;
            }

            users.forEach(user => {
                list.innerHTML += `
                    <tr>
                        <td>${user.uid}</td>
                        <td><input type="number" id="c-${user.uid}" value="${Math.floor(user.coins)}"></td>
                        <td><input type="number" id="p-${user.uid}" value="${user.pph}"></td>
                        <td style="color: ${user.banned ? '#f44336' : '#4caf50'}">
                            ${user.banned ? 'Banned' : 'Active'}
                        </td>
                        <td>
                            <button class="btn btn-save" onclick="updateUser('${user.uid}')">Save</button>
                            <button class="btn btn-ban ${user.banned ? 'unban' : ''}" onclick="toggleBan('${user.uid}', ${user.banned})">
                                ${user.banned ? 'Unban' : 'Ban'}
                            </button>
                        </td>
                    </tr>
                `;
            });
        } catch (e) {
            document.getElementById('user-list').innerHTML = '<tr><td colspan="5" style="text-align:center; color:red;">Error: Server is offline or URL expired!</td></tr>';
        }
    }

    async function updateUser(uid) {
        const coins = document.getElementById(`c-${uid}`).value;
        const pph = document.getElementById(`p-${uid}`).value;
        
        await fetch(`${API_URL}/admin/update`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ uid, coins, pph })
        });
        alert("User " + uid + " updated!");
        fetchUsers();
    }

    async function toggleBan(uid, currentStatus) {
        if (confirm("Change ban status for " + uid + "?")) {
            await fetch(`${API_URL}/admin/ban`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ uid, ban: !currentStatus })
            });
            fetchUsers();
        }
    }

    // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶Ö‡¶ü‡ßã ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂ ‡¶π‡¶¨‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
    fetchUsers();
    setInterval(fetchUsers, 5000);
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rabbit Miner Pro - Premium</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Orbitron:wght@600;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff9800;
            --primary-glow: rgba(255, 152, 0, 0.5);
            --bg: #050507;
            --card: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0;
            background-color: var(--bg);
            background-image: 
                radial-gradient(circle at 50% -20%, #2a1a0a 0%, #050507 100%);
            color: white;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Top Bar Design */
        .top-bar {
            padding: 30px 20px;
            text-align: center;
        }

        .balance-container {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.03);
            padding: 10px 25px;
            border-radius: 50px;
            border: 1px solid var(--border);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        #coins {
            font-size: 45px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            color: #fff;
            text-shadow: 0 0 15px var(--primary-glow);
        }

        /* Page Layout */
        .page {
            display: none;
            flex-direction: column;
            align-items: center;
            flex: 1;
            padding: 10px 20px 120px;
            overflow-y: auto;
        }
        .active-page { display: flex; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* Premium White Rabbit Design */
        .rabbit-platform {
            position: relative;
            width: 260px;
            height: 260px;
            margin: 30px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .rabbit-glow {
            position: absolute;
            width: 220px;
            height: 220px;
            background: var(--primary-glow);
            filter: blur(60px);
            border-radius: 50%;
            z-index: 1;
        }

        .rabbit-main {
            width: 180px;
            height: 210px;
            background: #ffffff;
            border-radius: 50% 50% 45% 45%;
            position: relative;
            z-index: 2;
            cursor: pointer;
            box-shadow: 0 15px 0 #ddd, 0 20px 40px rgba(0,0,0,0.4);
            transition: all 0.1s;
        }

        /* Ears with Pink touch */
        .rabbit-main::before, .rabbit-main::after {
            content: ''; position: absolute; top: -60px; width: 45px; height: 110px;
            background: #fff; border-radius: 50%; border-top: 15px solid #ffebee;
        }
        .rabbit-main::before { left: 35px; transform: rotate(-15deg); }
        .rabbit-main::after { right: 35px; transform: rotate(15deg); }

        .carrot-icon {
            position: absolute; top: 110px; left: 50%;
            transform: translateX(-50%) rotate(15deg);
            font-size: 55px; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));
        }

        .rabbit-main:active {
            transform: translateY(10px);
            box-shadow: 0 5px 0 #ddd, 0 10px 20px rgba(0,0,0,0.4);
        }

        /* Energy Bar */
        .energy-box { width: 100%; max-width: 300px; margin-top: 20px; }
        .energy-bar-wrap {
            height: 14px; background: #1a1a1a; border-radius: 20px;
            padding: 3px; border: 1px solid var(--border);
        }
        #energy-fill {
            height: 100%; background: linear-gradient(90deg, #ff9800, #ffcc80);
            border-radius: 20px; width: 100%; transition: width 0.2s;
            box-shadow: 0 0 10px var(--primary-glow);
        }

        /* Cards & Tasks */
        .card {
            width: 100%; background: var(--card); border: 1px solid var(--border);
            padding: 20px; border-radius: 24px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px);
        }

        .btn-action {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            border: none; color: white; padding: 12px 20px;
            border-radius: 15px; font-weight: bold; font-family: 'Inter';
            box-shadow: 0 4px 15px rgba(245, 124, 0, 0.3);
        }

        /* Premium Nav Bar */
        .nav-bar {
            position: fixed; bottom: 25px; left: 5%; width: 90%; height: 75px;
            background: rgba(20, 20, 25, 0.8); border-radius: 25px;
            display: flex; justify-content: space-around; align-items: center;
            border: 1px solid var(--border); backdrop-filter: blur(20px);
        }
        .nav-item {
            border: none; background: none; color: #555;
            display: flex; flex-direction: column; align-items: center;
            font-size: 10px; font-weight: 700; transition: 0.3s;
        }
        .nav-item.active { color: var(--primary); transform: translateY(-5px); }
        .nav-item span { font-size: 26px; margin-bottom: 4px; transition: 0.3s; }
        .nav-item.active span { transform: scale(1.2); }

        /* Float Animation */
        .float-text {
            position: absolute; color: white; font-family: 'Orbitron';
            font-weight: 900; font-size: 30px; pointer-events: none;
            animation: floatMove 0.8s ease-out forwards;
            text-shadow: 0 0 10px var(--primary-glow);
        }
        @keyframes floatMove { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-120px); } }

    </style>
</head>
<body>

    <div class="top-bar">
        <div class="balance-container">
            <span style="font-size: 24px;">ü•ï</span>
            <span id="coins">0</span>
        </div>
        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
            <div style="color: #888; font-size: 12px;">Profit/hr: <b id="pph" style="color: #fff;">0</b></div>
            <div style="color: #888; font-size: 12px;">Rank: <b style="color: #fff;">Gold</b></div>
        </div>
    </div>

    <div id="home" class="page active-page">
        <div class="rabbit-platform">
            <div class="rabbit-glow"></div>
            <div class="rabbit-main" id="tap-btn">
                <div class="carrot-icon">ü•ï</div>
            </div>
        </div>
        
        <div class="energy-box">
            <div style="display: flex; justify-content: space-between; font-size: 14px; margin-bottom: 5px;">
                <span style="color: #888;">Energy Status</span>
                <span id="energy-text">1000 / 1000</span>
            </div>
            <div class="energy-bar-wrap">
                <div id="energy-fill"></div>
            </div>
        </div>
        
        <button class="btn-action" style="margin-top: 30px; width: 80%;" onclick="tg.showAlert('Coming Soon!')">üéÅ Daily Boost</button>
    </div>

    <div id="upgrade" class="page">
        <h2 style="font-family: 'Orbitron'; margin: 20px 0;">Mining Center</h2>
        <div id="upgrade-list" style="width: 100%;"></div>
    </div>

    <div id="tasks" class="page">
        <h2 style="font-family: 'Orbitron'; margin: 20px 0;">Social Tasks</h2>
        
        <div class="card">
            <div><b>Subscribe Channel</b><br><small style="color:var(--primary)">+10,000 ü•ï</small></div>
            <button class="btn-action" onclick="handleTask(1, 'https://t.me/jkt_earning_zone20', 10000, this)">Join</button>
        </div>
        
        <div class="card">
            <div><b>Join JKT Group</b><br><small style="color:var(--primary)">+5,000 ü•ï</small></div>
            <button class="btn-action" onclick="handleTask(2, 'https://t.me/+cAq8TiohRXIzZmFl', 5000, this)">Join</button>
        </div>
    </div>

    <div id="profile" class="page">
        <h2 style="font-family: 'Orbitron'; margin: 20px 0;">Wallet</h2>
        <div class="card" style="flex-direction: column; text-align: center; gap: 15px;">
            <span style="color: #888;">Available Balance</span>
            <h1 id="prof-coins" style="font-family: 'Orbitron'; margin: 0; font-size: 40px;">0</h1>
            <div style="display: flex; gap: 10px; width: 100%;">
                <button class="btn-action" style="flex: 1; background: #222;" onclick="tg.showAlert('Min. withdraw 1M carrots')">Withdraw</button>
                <button class="btn-action" style="flex: 1;" onclick="tg.openTelegramLink('https://t.me/share/url?url=YourBotLink')">Invite</button>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <button class="nav-item active" onclick="nav('home', this)"><span>üè†</span>Home</button>
        <button class="nav-item" onclick="nav('upgrade', this)"><span>‚õèÔ∏è</span>Mining</button>
        <button class="nav-item" onclick="nav('tasks', this)"><span>üìã</span>Tasks</button>
        <button class="nav-item" onclick="nav('profile', this)"><span>üìä</span>Wallet</button>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = parseFloat(localStorage.getItem('rabbit_coins')) || 0;
        let energy = parseFloat(localStorage.getItem('rabbit_energy')) || 1000;
        let pph = 0;
        const maxEnergy = 1000;

        const miners = [
            {id: 'm1', name: 'Nano Miner', icon: 'ü§ñ', level: parseInt(localStorage.getItem('l1') || '0'), cost: 200, profit: 10},
            {id: 'm2', name: 'Rabbit Drill', icon: 'üöú', level: parseInt(localStorage.getItem('l2') || '0'), cost: 1000, profit: 50},
            {id: 'm3', name: 'Carrot Factory', icon: 'üè≠', level: parseInt(localStorage.getItem('l3') || '0'), cost: 5000, profit: 250}
        ];

        function sync() {
            pph = 0;
            miners.forEach(m => pph += m.level * m.profit);
            document.getElementById('coins').innerText = Math.floor(coins).toLocaleString();
            document.getElementById('prof-coins').innerText = Math.floor(coins).toLocaleString();
            document.getElementById('pph').innerText = pph.toLocaleString();
            document.getElementById('energy-text').innerText = Math.floor(energy) + " / " + maxEnergy;
            document.getElementById('energy-fill').style.width = (energy / maxEnergy * 100) + "%";
            
            localStorage.setItem('rabbit_coins', coins);
            localStorage.setItem('rabbit_energy', energy);
        }

        function renderUpgrades() {
            const list = document.getElementById('upgrade-list');
            list.innerHTML = '';
            miners.forEach(m => {
                const cost = Math.floor(m.cost * Math.pow(1.6, m.level));
                list.innerHTML += `
                <div class="card">
                    <div><span style="font-size:30px">${m.icon}</span> <b>${m.name}</b><br><small>Lv ${m.level} ‚Ä¢ +${m.profit}/hr</small></div>
                    <button class="btn-action" onclick="buyMiner('${m.id}')">${cost.toLocaleString()}</button>
                </div>`;
            });
        }

        function buyMiner(id) {
            const m = miners.find(x => x.id === id);
            const cost = Math.floor(m.cost * Math.pow(1.6, m.level));
            if(coins >= cost) {
                coins -= cost;
                m.level++;
                localStorage.setItem('l'+id.charAt(1), m.level);
                sync(); renderUpgrades();
                tg.HapticFeedback.notificationOccurred('success');
            } else { tg.showAlert("Need more carrots!"); }
        }

        function handleTask(id, url, reward, btn) {
            if(btn.innerText === "Claim") {
                coins += reward;
                btn.innerText = "Done ‚úÖ";
                btn.disabled = true;
                sync();
                tg.showAlert("Reward Claimed!");
                return;
            }
            tg.openTelegramLink(url);
            btn.innerText = "Check";
            setTimeout(() => { btn.innerText = "Claim"; btn.style.background = "#2ecc71"; }, 3000);
        }

        const tapBtn = document.getElementById('tap-btn');
        tapBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if(energy >= 1) {
                coins += 1; energy -= 1;
                const t = e.touches[0];
                const f = document.createElement('div');
                f.className = 'float-text'; f.innerText = '+1';
                f.style.left = t.clientX + 'px'; f.style.top = t.clientY + 'px';
                document.body.appendChild(f);
                setTimeout(() => f.remove(), 800);
                sync();
                tg.HapticFeedback.impactOccurred('heavy');
            }
        });

        function nav(id, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(id).classList.add('active-page');
            btn.classList.add('active');
            tg.HapticFeedback.selectionChanged();
        }

        setInterval(() => {
            coins += (pph / 3600);
            if(energy < maxEnergy) energy += 1;
            sync();
        }, 1000);

        sync(); renderUpgrades();
    </script>
</body>
</html>

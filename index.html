<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Clicker Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary-gold: #ffcc00;
            --dark-bg: #0f0f0f;
            --card-bg: #1e1e1e;
        }
        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        .header {
            width: 100%;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            background: linear-gradient(to bottom, rgba(255,204,0,0.1), transparent);
        }
        .header img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--primary-gold);
        }
        .score-box {
            text-align: center;
            margin-top: 30px;
        }
        .score-title { font-size: 14px; color: #aaa; text-transform: uppercase; letter-spacing: 1px; }
        .score-value { font-size: 48px; font-weight: 800; color: var(--primary-gold); margin: 5px 0; }

        .coin-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .coin {
            width: 220px;
            height: 220px;
            background: radial-gradient(circle, #ffe066 0%, #ffcc00 50%, #cca300 100%);
            border-radius: 50%;
            box-shadow: 0 0 40px rgba(255, 204, 0, 0.4), inset 0 0 20px rgba(255,255,255,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            cursor: pointer;
            transition: transform 0.05s ease;
            position: relative;
        }
        .coin:active { transform: scale(0.92) rotate(2deg); }

        .footer-info {
            width: 90%;
            background: var(--card-bg);
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
        }
        .level-bar {
            width: 100%;
            height: 10px;
            background: #333;
            border-radius: 5px;
            margin-top: 8px;
            overflow: hidden;
        }
        .level-progress {
            width: 0%;
            height: 100%;
            background: var(--primary-gold);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>

    <div class="header">
        <div id="photo-container"></div>
        <div style="text-align: left;">
            <div style="font-size: 12px; color: #888;">PLAYER</div>
            <div id="user-name" style="font-weight: bold; font-size: 18px;">Guest User</div>
        </div>
    </div>

    <div class="score-box">
        <div class="score-title">Total Balance</div>
        <div class="score-value" id="score">0</div>
    </div>

    <div class="coin-container">
        <div id="coin" class="coin">ü™ô</div>
    </div>

    <div class="footer-info">
        <div style="display: flex; justify-content: space-between; font-size: 13px;">
            <span>Level: Silver</span>
            <span id="level-text">0 / 1000</span>
        </div>
        <div class="level-bar">
            <div id="progress" class="level-progress"></div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const scoreDisplay = document.getElementById('score');
        const progress = document.getElementById('progress');
        const levelText = document.getElementById('level-text');
        const coin = document.getElementById('coin');

        // ‡ßß. ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ (localStorage)
        let score = parseInt(localStorage.getItem('gameScore')) || 0;
        updateUI();

        // ‡ß®. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        const user = tg.initDataUnsafe?.user;
        if (user) {
            document.getElementById('user-name').innerText = user.first_name;
            if (user.photo_url) {
                document.getElementById('photo-container').innerHTML = `<img src="${user.photo_url}">`;
            } else {
                document.getElementById('photo-container').innerHTML = `<div style="width:50px; height:50px; border-radius:50%; background:#444; display:flex; align-items:center; justify-content:center; border:2px solid var(--primary-gold)">${user.first_name[0]}</div>`;
            }
        }

        tg.expand();
        tg.enableClosingConfirmation();

        // ‡ß©. ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞
        coin.onclick = (e) => {
            score++;
            updateUI();
            saveScore();
            
            // ‡¶≠‡¶æ‡¶á‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶®
            tg.HapticFeedback.impactOccurred('light');

            // ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® (‡¶≠‡¶æ‡¶∏‡¶Æ‡¶æ‡¶® +‡ßß)
            showFloatingText(e.clientX, e.clientY);
        };

        function updateUI() {
            scoreDisplay.innerText = score.toLocaleString();
            let goal = 1000;
            let percent = (score / goal) * 100;
            if (percent > 100) percent = 100;
            progress.style.width = percent + '%';
            levelText.innerText = `${score} / ${goal}`;
        }

        function saveScore() {
            localStorage.setItem('gameScore', score);
        }

        function showFloatingText(x, y) {
            const text = document.createElement('div');
            text.innerText = '+1';
            text.style.position = 'fixed';
            text.style.left = x + 'px';
            text.style.top = y + 'px';
            text.style.color = '#ffcc00';
            text.style.fontWeight = 'bold';
            text.style.pointerEvents = 'none';
            text.style.animation = 'floatUp 0.8s ease-out forwards';
            document.body.appendChild(text);
            setTimeout(() => text.remove(), 800);
        }
    </script>

    <style>
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }
    </style>
</body>
</html>

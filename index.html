
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>White Rabbit Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #ffffff;
            --accent: #ff7b00;
            --bg: #050505;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at top, #222 0%, #000 100%);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .tab-content {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            height: 100%;
            padding: 20px;
            padding-bottom: 120px;
            overflow-y: auto;
        }

        .active { display: flex; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* Score */
        .balance-value { font-size: 55px; font-weight: 900; color: var(--primary); margin: 20px 0; text-shadow: 0 0 20px rgba(255,255,255,0.2); }

        /* CSS Rabbit - No image needed */
        .rabbit-tap-area {
            position: relative;
            width: 250px;
            height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .rabbit-body {
            width: 140px;
            height: 180px;
            background: #fff;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            box-shadow: 0 0 40px rgba(255,255,255,0.2);
            transition: transform 0.1s;
        }

        /* Ears */
        .rabbit-body::before, .rabbit-body::after {
            content: '';
            position: absolute;
            top: -60px;
            width: 40px;
            height: 90px;
            background: #fff;
            border-radius: 50% 50% 10% 10%;
        }
        .rabbit-body::before { left: 20px; transform: rotate(-10deg); }
        .rabbit-body::after { right: 20px; transform: rotate(10deg); }

        /* Mouth Carrot */
        .carrot {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%) rotate(20deg);
            font-size: 45px;
            z-index: 10;
        }

        .rabbit-active { transform: scale(1.1); }

        /* Tasks */
        .task-card {
            width: 100%;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .btn-join { background: white; color: black; border: none; padding: 10px 18px; border-radius: 12px; font-weight: bold; }
        .btn-check { background: var(--accent); color: white; border: none; padding: 10px 18px; border-radius: 12px; font-weight: bold; display: none; }

        /* Nav Bar Animation */
        .nav-bar {
            position: fixed; bottom: 20px; left: 15px; right: 15px;
            height: 75px; background: rgba(20,20,20,0.95);
            border-radius: 30px; display: flex; justify-content: space-around;
            align-items: center; border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .nav-item { display: flex; flex-direction: column; align-items: center; color: #666; font-size: 11px; transition: 0.3s; }
        .nav-item.active-nav { color: var(--primary); transform: translateY(-5px) scale(1.1); }
        .nav-icon { font-size: 24px; margin-bottom: 4px; }

        .plus-one {
            position: absolute; color: white; font-size: 30px; font-weight: bold;
            pointer-events: none; animation: floatUp 0.7s forwards;
        }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-130px); opacity: 0; } }
    </style>
</head>
<body>

    <div id="home" class="tab-content active">
        <h2 style="margin-top: 20px;">Welcome</h2>
        <div class="balance-value" id="home-bal">0</div>
        <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 25px; width: 100%; text-align: center;">
            <p>Invite friends and get 1,000 Coins!</p>
            <button onclick="inviteFriend()" style="width: 100%; padding: 12px; border-radius: 12px; background: white; color: black; font-weight: bold; border: none;">Invite Friend</button>
        </div>
    </div>

    <div id="earn" class="tab-content">
        <div class="balance-value" id="tap-bal">0</div>
        <div class="rabbit-tap-area" id="tap-area">
            <div class="rabbit-body" id="rabbit">
                <div class="carrot">ü•ï</div>
            </div>
        </div>
        <p style="color: #666; margin-top: 30px;">Tap the White Rabbit!</p>
    </div>

    <div id="tasks" class="tab-content">
        <h2 style="margin-bottom: 5px;">Social Tasks</h2>
        <p style="color: #888; margin-bottom: 25px;">Join & Verify to earn coins</p>
        
        <div class="task-card" id="task1">
            <div>
                <div style="font-weight: bold;">Join Channel 1</div>
                <div style="color: #ff9500;">+5,000 Coins</div>
            </div>
            <button class="btn-join" onclick="startTask(1, 'https://t.me/jkt_earning_zone20')">Join</button>
            <button class="btn-check" id="check1" onclick="checkTask(1, 5000)">Check</button>
        </div>

        <div class="task-card" id="task2">
            <div>
                <div style="font-weight: bold;">Join Group 2</div>
                <div style="color: #ff9500;">+3,000 Coins</div>
            </div>
            <button class="btn-join" onclick="startTask(2, 'https://t.me/+cAq8TiohRXIzZmFl')">Join</button>
            <button class="btn-check" id="check2" onclick="checkTask(2, 3000)">Check</button>
        </div>

        <div class="task-card" id="task3">
            <div>
                <div style="font-weight: bold;">Support Group</div>
                <div style="color: #ff9500;">+2,000 Coins</div>
            </div>
            <button class="btn-join" onclick="startTask(3, 'https://t.me/jkt_support99')">Join</button>
            <button class="btn-check" id="check3" onclick="checkTask(3, 2000)">Check</button>
        </div>
    </div>

    <div id="profile" class="tab-content">
        <h2>My Stats</h2>
        <div style="background: rgba(255,255,255,0.05); width: 100%; padding: 25px; border-radius: 25px;">
            <p>Total Balance: <span id="prof-bal" style="color: gold; font-weight: bold;">0</span></p>
            <p>Status: <span style="color: #55ff55;">Active</span></p>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active-nav" onclick="switchTab('home', this)"><span class="nav-icon">üè†</span>Home</div>
        <div class="nav-item" onclick="switchTab('earn', this)"><span class="nav-icon">üêá</span>Earn</div>
        <div class="nav-item" onclick="switchTab('tasks', this)"><span class="nav-icon">üìã</span>Tasks</div>
        <div class="nav-item" onclick="switchTab('profile', this)"><span class="nav-icon">üë§</span>Profile</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let score = parseInt(localStorage.getItem('rb_score')) || 0;
        let completedTasks = JSON.parse(localStorage.getItem('rb_tasks')) || [];

        function switchTab(id, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active-nav');
            tg.HapticFeedback.selectionChanged();
        }

        // Tap Mechanics
        const tapArea = document.getElementById('tap-area');
        const rabbit = document.getElementById('rabbit');

        tapArea.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rabbit.classList.add('rabbit-active');
            setTimeout(() => rabbit.classList.remove('rabbit-active'), 100);
            
            for (let i = 0; i < e.touches.length; i++) {
                score++;
                createPlus(e.touches[i].clientX, e.touches[i].clientY);
            }
            update();
            tg.HapticFeedback.impactOccurred('medium');
        });

        function createPlus(x, y) {
            const d = document.createElement('div');
            d.innerText = '+1'; d.className = 'plus-one';
            d.style.left = x + 'px'; d.style.top = y + 'px';
            document.body.appendChild(d);
            setTimeout(() => d.remove(), 700);
        }

        // Task Mechanics
        function startTask(id, url) {
            tg.openTelegramLink(url);
            // ‡¶∂‡ßã ‡¶ö‡ßá‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è‡¶¨‡¶Ç ‡¶π‡¶æ‡¶á‡¶° ‡¶ú‡ßü‡ßá‡¶® ‡¶¨‡¶æ‡¶ü‡¶®
            document.querySelector(`#task${id} .btn-join`).style.display = 'none';
            document.querySelector(`#task${id} .btn-check`).style.display = 'block';
        }

        function checkTask(id, reward) {
            const btn = document.getElementById(`check${id}`);
            btn.innerText = "Verifying...";
            btn.disabled = true;

            setTimeout(() => {
                if(Math.random() > 0.1) { // ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶∂‡¶®: ‡ßØ‡ßØ% ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏ ‡¶π‡¶¨‡ßá
                    score += reward;
                    completedTasks.push(id);
                    localStorage.setItem('rb_tasks', JSON.stringify(completedTasks));
                    btn.innerText = "Claimed ‚úÖ";
                    btn.style.background = "#333";
                    update();
                    tg.showAlert("Success! You received " + reward + " coins.");
                } else {
                    btn.innerText = "Failed! Try Again";
                    btn.disabled = false;
                    tg.showAlert("Please make sure you joined the channel!");
                }
            }, 3000);
        }

        function inviteFriend() {
            tg.openTelegramLink(`https://t.me/share/url?url=https://t.me/YourBotLink&text=Join Rabbit Clicker!`);
        }

        function update() {
            localStorage.setItem('rb_score', score);
            document.querySelectorAll('#home-bal, #tap-bal, #prof-bal').forEach(el => el.innerText = score.toLocaleString());
            
            // ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶Ö‡¶≤‡¶∞‡ßá‡¶°‡¶ø ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            completedTasks.forEach(id => {
                const card = document.getElementById(`task${id}`);
                if(card) {
                    card.querySelector('.btn-join').style.display = 'none';
                    const checkBtn = card.querySelector('.btn-check');
                    checkBtn.style.display = 'block';
                    checkBtn.innerText = "Claimed ‚úÖ";
                    checkBtn.disabled = true;
                    checkBtn.style.background = "#333";
                }
            });
        }

        update();
        tg.expand();
    </script>
</body>
</html>

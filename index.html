<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Rabbit Clicker Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #ffffff;
            --accent: #ff9500; /* Carrot Orange */
            --bg: #0a0a0a;
            --card-bg: rgba(255, 255, 255, 0.08);
            --nav-bg: rgba(15, 15, 15, 0.95);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at top, #222 0%, #000 100%);
            color: white;
            font-family: 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            height: 100%;
            padding: 20px;
            padding-bottom: 120px;
            overflow-y: auto;
            animation: slideUp 0.4s ease-out;
        }

        .active { display: flex; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Score Display */
        .balance-value { 
            font-size: 50px; 
            font-weight: 900; 
            color: var(--primary); 
            margin: 15px 0; 
            text-shadow: 0 0 20px rgba(255,255,255,0.2); 
        }

        /* Rabbit (Tap Area) */
        .rabbit-container {
            position: relative;
            margin: 40px 0;
            cursor: pointer;
        }

        .rabbit {
            width: 250px;
            height: 250px;
            background: url('https://img.icons8.com/isometric-folders/512/rabbit.png'); /* White Rabbit Placeholder */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            filter: drop-shadow(0 0 20px rgba(255,255,255,0.3));
            transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* ‡¶Æ‡ßÅ‡¶ñ‡ßá ‡¶ó‡¶æ‡¶ú‡¶∞ ‡¶á‡¶´‡ßá‡¶ï‡ßç‡¶ü ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶õ‡ßã‡¶ü ‡¶á‡¶Æ‡ßã‡¶ú‡¶ø */
            position: relative;
        }
        
        /* ‡¶Æ‡ßÅ‡¶ñ‡ßá ‡¶ó‡¶æ‡¶ú‡¶∞ */
        .rabbit::after {
            content: 'ü•ï';
            position: absolute;
            bottom: 40%;
            left: 55%;
            font-size: 40px;
            transform: rotate(-20deg);
        }

        .rabbit-active { transform: scale(1.15) rotate(2deg); }

        /* Plus One Animation */
        .plus-one {
            position: absolute; color: var(--accent); font-size: 35px; font-weight: 800;
            pointer-events: none; animation: floatUp 0.8s forwards; z-index: 100;
        }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-150px) scale(1.5); opacity: 0; } }

        /* Navigation Bar & Animation */
        .nav-bar {
            position: fixed; bottom: 20px; left: 15px; right: 15px;
            height: 75px; background: var(--nav-bg);
            border-radius: 30px; display: flex; justify-content: space-around;
            align-items: center; border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .nav-item { 
            display: flex; flex-direction: column; align-items: center; 
            color: #666; font-size: 11px; transition: all 0.3s;
        }

        .nav-item.active-nav { 
            color: var(--accent); 
            transform: scale(1.2); 
            animation: navBounce 0.4s ease;
        }

        @keyframes navBounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1.2); }
        }

        .nav-icon { font-size: 24px; margin-bottom: 4px; }

        /* Task Items */
        .task-item {
            width: 100%; background: var(--card-bg);
            padding: 18px; border-radius: 20px; margin-bottom: 12px;
            display: flex; justify-content: space-between; align-items: center;
        }

        .btn {
            background: var(--accent); color: white; border: none;
            padding: 10px 20px; border-radius: 12px; font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="home" class="tab-content active">
        <div style="background: var(--card-bg); padding: 20px; border-radius: 25px; width: 100%; text-align: center;">
            <div id="user-pfp">üë§</div>
            <h2 id="user-name" style="margin: 10px 0;">Bunny Hunter</h2>
            <div style="color: var(--accent); font-weight: bold;">ü•ï Elite Member</div>
        </div>
        <div class="balance-value" id="home-bal">0</div>
        <button style="width: 100%; padding: 15px; border-radius: 20px; background: white; color: black; font-weight: bold; border: none;" onclick="inviteFriend()">Invite & Earn 1,000 ü•ï</button>
    </div>

    <div id="earn" class="tab-content">
        <div class="balance-value" id="tap-bal">0</div>
        <div class="rabbit-container" id="rabbit-tap">
            <div class="rabbit" id="rabbit-img"></div>
        </div>
        <div style="color: #aaa; background: rgba(255,149,0,0.1); padding: 8px 20px; border-radius: 15px;">
            Tap the Rabbit to Eat Carrots!
        </div>
    </div>

    <div id="tasks" class="tab-content">
        <h2 style="margin-bottom: 5px;">Tasks</h2>
        <p style="color: #888; margin-bottom: 30px;">Join channels and get free coins</p>
        
        <div class="task-item">
            <div>
                <div style="font-weight: bold;">Join Channel 1</div>
                <div style="color: var(--accent);">+5,000 Coins</div>
            </div>
            <button class="btn" onclick="doTask('https://t.me/jkt_earning_zone20', 5000, this)">Claim</button>
        </div>

        <div class="task-item">
            <div>
                <div style="font-weight: bold;">Join Group 2</div>
                <div style="color: var(--accent);">+3,000 Coins</div>
            </div>
            <button class="btn" onclick="doTask('https://t.me/+cAq8TiohRXIzZmFl', 3000, this)">Claim</button>
        </div>

        <div class="task-item">
            <div>
                <div style="font-weight: bold;">Join Support Group</div>
                <div style="color: var(--accent);">+2,000 Coins</div>
            </div>
            <button class="btn" onclick="doTask('https://t.me/jkt_support99', 2000, this)">Claim</button>
        </div>
    </div>

    <div id="profile" class="tab-content">
        <h2>Profile</h2>
        <div style="background: var(--card-bg); width: 100%; padding: 25px; border-radius: 25px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <span>Total Carrots:</span> <span id="prof-bal" style="color: var(--accent); font-weight: 900;">0</span>
            </div>
            <div style="display: flex; justify-content: space-between; color: #888;">
                <span>Total Taps:</span> <span id="prof-daily">0</span>
            </div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active-nav" onclick="switchTab('home', this)">
            <span class="nav-icon">üè†</span><span>Home</span>
        </div>
        <div class="nav-item" onclick="switchTab('earn', this)">
            <span class="nav-icon">ü•ï</span><span>Earn</span>
        </div>
        <div class="nav-item" onclick="switchTab('tasks', this)">
            <span class="nav-icon">üìã</span><span>Tasks</span>
        </div>
        <div class="nav-item" onclick="switchTab('profile', this)">
            <span class="nav-icon">üë§</span><span>Profile</span>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let score = parseInt(localStorage.getItem('rb_score')) || 0;
        let taps = parseInt(localStorage.getItem('rb_taps')) || 0;

        function switchTab(id, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-nav'));
            document.getElementById(id).classList.add('active');
            el.classList.add('active-nav');
            tg.HapticFeedback.selectionChanged();
        }

        const rabbit = document.getElementById('rabbit-tap');
        const rabbitImg = document.getElementById('rabbit-img');

        rabbit.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rabbitImg.classList.add('rabbit-active');
            setTimeout(() => rabbitImg.classList.remove('rabbit-active'), 100);
            
            for (let i = 0; i < e.touches.length; i++) {
                score++; taps++;
                createPlus(e.touches[i].clientX, e.touches[i].clientY);
            }
            update();
            tg.HapticFeedback.impactOccurred('medium');
        });

        function createPlus(x, y) {
            const d = document.createElement('div');
            d.innerText = '+1'; d.className = 'plus-one';
            d.style.left = x + 'px'; d.style.top = y + 'px';
            document.body.appendChild(d);
            setTimeout(() => d.remove(), 800);
        }

        function doTask(url, reward, btn) {
            tg.openTelegramLink(url);
            btn.innerText = "Wait...";
            setTimeout(() => {
                score += reward;
                update();
                btn.innerText = "Done ‚úÖ";
                btn.disabled = true;
                btn.style.background = "#333";
                tg.showAlert("You got " + reward + " carrots!");
            }, 4000);
        }

        function inviteFriend() {
            const inviteLink = `https://t.me/${tg.initDataUnsafe?.user?.username || 'bot'}?start=ref`;
            tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(inviteLink)}&text=Join my Rabbit Team! ü•ï`);
        }

        function update() {
            localStorage.setItem('rb_score', score);
            localStorage.setItem('rb_taps', taps);
            document.querySelectorAll('#home-bal, #tap-bal, #prof-bal').forEach(el => el.innerText = score.toLocaleString());
            document.getElementById('prof-daily').innerText = taps.toLocaleString();
        }

        const user = tg.initDataUnsafe?.user;
        if (user) {
            document.getElementById('user-name').innerText = user.first_name;
            if (user.photo_url) document.getElementById('user-pfp').innerHTML = `<img src="${user.photo_url}" style="width:60px; height:60px; border-radius:50%; border:2px solid white;">`;
        }

        update();
        tg.expand();
    </script>
</body>
</html>
